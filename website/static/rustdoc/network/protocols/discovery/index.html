<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `discovery` mod in crate `network`."><meta name="keywords" content="rust, rustlang, rust-lang, discovery"><title>network::protocols::discovery - Rust</title><link rel="stylesheet" type="text/css" href="../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../dark.css"><link rel="stylesheet" type="text/css" href="../../../light.css" id="themeStyle"><script src="../../../storage.js"></script><noscript><link rel="stylesheet" href="../../../noscript.css"></noscript><link rel="shortcut icon" href="../../../favicon.ico"><style type="text/css">#crate-search{background-image:url("../../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../../network/index.html'><img src='../../../rust-logo.png' alt='logo' width='100'></a><p class='location'>Module discovery</p><div class="sidebar-elems"><div class="block items"><ul><li><a href="#structs">Structs</a></li><li><a href="#constants">Constants</a></li></ul></div><p class='location'><a href='../../index.html'>network</a>::<wbr><a href='../index.html'>protocols</a></p><script>window.sidebarCurrent = {name: 'discovery', ty: 'mod', relpath: '../'};</script><script defer src="../sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../../../theme.js"></script><nav class="sub"><form class="search-form js-only"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../../../settings.html"><img src="../../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../../../src/network/protocols/discovery/mod.rs.html#1-476' title='goto source code'>[src]</a></span><span class='in-band'>Module <a href='../../index.html'>network</a>::<wbr><a href='../index.html'>protocols</a>::<wbr><a class="mod" href=''>discovery</a></span></h1><div class='docblock'><h2 id="discovery" class="section-header"><a href="#discovery">Discovery</a></h2>
<p>The discovery module is responsible for discovering the network addresses of all members of the
Libra network. Additionally, it passes on this infromation to the <a href="../../connectivity_manager"><code>ConnectivityManager</code></a> module
to ensure appropriate connectivity.</p>
<h2 id="implementation" class="section-header"><a href="#implementation">Implementation</a></h2>
<p>The discovery module is implemented as a stand-alone actor in the Network sub-system of the
Libra stack. The actor participates in discovery by periodically sending its observed state of
the network to a randomly chosen peer. Other peers are also expected to be running the same
protocol. Therefore, in expectation, every peer expects to hear from 1 other peer in each
round. On hearing from the remote peer, the local discovery module tries to reconcile its state
to reflect any changes. In addition to updating its state, it also passes on new infromation to
the ConnectivityManager module.</p>
<p>For the initial bootstrap of a node, it sends the discovery message to a randomly chosen seed
peer in each round. The message only contains the identity of this peer unless it learns more
about the network membership from another peer.</p>
<p>Currently we do not use this mechanism to detect peer failures - instead, we simply connect to
all the peers in the network, and hope to learn about their failure on connection errors.</p>
<p>TODO: We need to handle to case of peers who may no longer be a part of the network.</p>
<h2 id="future-work" class="section-header"><a href="#future-work">Future work</a></h2>
<ul>
<li>Currently, we do not try to detect/punish nodes which are just lurking (without contributing
to the protocol), or actively trying to spread misinformation in the network. In the future, we
plan to remedy this by introducing a module dedicated to detecting byzantine behavior, and by
making the discovery protocol itself tolerant to byzantine faults.</li>
<li>As an optimization, instead of creating a new substream to the chosen peer in each round, we
could maintain a cache of open substreams which could be re-used across numerous rounds.</li>
</ul>
</div><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table><tr class='module-item'><td><a class="struct" href="struct.Discovery.html" title='network::protocols::discovery::Discovery struct'>Discovery</a></td><td class='docblock-short'><p>Represents a prototype for an upgrade to handle the Libra Discovery protocol.</p>
</td></tr></table><h2 id='constants' class='section-header'><a href="#constants">Constants</a></h2>
<table><tr class='module-item'><td><a class="constant" href="constant.DISCOVERY_PROTOCOL_NAME.html" title='network::protocols::discovery::DISCOVERY_PROTOCOL_NAME constant'>DISCOVERY_PROTOCOL_NAME</a></td><td class='docblock-short'></td></tr></table></section><section id="search" class="content hidden"></section><section class="footer"></section><aside id="help" class="hidden"><div><h1 class="hidden">Help</h1><div class="shortcuts"><h2>Keyboard Shortcuts</h2><dl><dt><kbd>?</kbd></dt><dd>Show this help dialog</dd><dt><kbd>S</kbd></dt><dd>Focus the search field</dd><dt><kbd>↑</kbd></dt><dd>Move up in search results</dd><dt><kbd>↓</kbd></dt><dd>Move down in search results</dd><dt><kbd>↹</kbd></dt><dd>Switch tab</dd><dt><kbd>&#9166;</kbd></dt><dd>Go to active search result</dd><dt><kbd>+</kbd></dt><dd>Expand all sections</dd><dt><kbd>-</kbd></dt><dd>Collapse all sections</dd></dl></div><div class="infos"><h2>Search Tricks</h2><p>Prefix searches with a type followed by a colon (e.g., <code>fn:</code>) to restrict the search to a given type.</p><p>Accepted types are: <code>fn</code>, <code>mod</code>, <code>struct</code>, <code>enum</code>, <code>trait</code>, <code>type</code>, <code>macro</code>, and <code>const</code>.</p><p>Search functions by type signature (e.g., <code>vec -> usize</code> or <code>* -> vec</code>)</p><p>Search multiple things at once by splitting your query with comma (e.g., <code>str,u8</code> or <code>String,struct:Vec,test</code>)</p></div></div></aside><script>window.rootPath = "../../../";window.currentCrate = "network";</script><script src="../../../aliases.js"></script><script src="../../../main.js"></script><script defer src="../../../search-index.js"></script></body></html>